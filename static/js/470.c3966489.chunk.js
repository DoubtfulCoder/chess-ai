"use strict";(self.webpackChunkchess_ai=self.webpackChunkchess_ai||[]).push([[470],{470:function(e,r,n){var t=n(762),o=n(388),a=(n(791),n(254),{p:{p:105,n:104,b:103,r:102,q:101,k:100},n:{p:205,n:204,b:203,r:202,q:201,k:200},b:{p:305,n:304,b:303,r:302,q:301,k:300},r:{p:405,n:404,b:403,r:402,q:401,k:400},q:{p:505,n:504,b:503,r:502,q:501,k:500},k:{p:605,n:604,b:603,r:602,q:601,k:600}}),u={p:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[.3,.2,.2,.3,.3,.1,.3,.3],[.2,.1,.4,.5,.5,.1,.1,.1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],n:[[0,-.1,0,0,0,0,-.1,0],[0,0,0,.2,.2,0,0,0],[-.1,.2,.4,0,0,.4,.2,-.1],[0,0,0,.3,.3,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],b:[[0,0,-.1,0,0,-.1,0,0],[0,.3,0,.1,.1,0,.3,0],[0,0,0,.2,.2,0,0,0],[0,0,.3,0,0,.3,0,0],[0,.3,0,0,0,0,.3,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],r:[[0,0,.2,.3,.3,.2,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],q:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],k:[[0,0,0,-.5,0,0,0,0],[0,0,0,-.5,-.5,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},c={p:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[.2,.2,.2,.2,.2,.2,.2,.2],[.3,.3,.3,.5,.5,.3,.3,.3],[.4,.4,.4,.4,.4,.4,.4,.4],[.5,.5,.5,.5,.5,.5,.5,.5],[.7,.7,.7,.7,.7,.7,.7,.7],[0,0,0,0,0,0,0,0]],n:[[0,-.1,0,0,0,0,-.1,0],[0,0,0,.1,.1,0,0,0],[-.1,.1,.1,0,0,.1,.1,-.1],[0,0,0,.1,.1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],b:[[0,0,-.1,0,0,-.1,0,0],[0,.1,0,.1,.1,0,.1,0],[0,0,0,.1,.1,0,0,0],[0,0,.1,0,0,.1,0,0],[0,.1,0,0,0,0,.1,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],r:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],q:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[.1,.1,.1,.1,.1,.1,.1,.1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],k:[[0,0,0,0,0,0,0,0],[0,0,0,.2,.2,.2,0,0],[0,.2,.2,.2,.2,0,0,0],[0,.2,.2,.2,.2,.2,0,0],[0,0,.2,.2,.2,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]};function i(e){return e.replace(/[+#]?[?!]*$/,"")}function l(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",n=arguments.length>2?arguments[2]:void 0,t=0;if(e.includes("O-O"))return.7;if(e.includes("="))return 9;e.includes("+")&&n>20&&(t+=-.3),e.includes("x")&&(t+=.3);var o=(e=i(e))[0];"B"!==o&&"N"!==o&&"R"!==o&&"Q"!==o&&"K"!==o&&(o="p"),o=o.toLowerCase();var a,l,v=e.slice(e.length-2,e.length);return"white"===r?(a=v.charCodeAt(0)-97,l=v.charCodeAt(1)-49):(a=v.charCodeAt(0)-97,l=7-(v.charCodeAt(1)-49)),n<=15?(console.log("endgame!"),c[o][a][l]+t):u[o][l][a]+t}function v(e,r){if(f(e,r))return 0;try{return function(e,r){var n=0;(r=i(r)).includes("=")&&(n+=h[r[r.length-1].toLowerCase()],r=r.slice(0,r.length-2));var t=r[0];"B"!==t&&"N"!==t&&"R"!==t&&"Q"!==t&&"K"!==t&&(t="p"),t=t.toLowerCase();var o=r.slice(r.length-2,r.length),u=e.get(o).type.toLowerCase();return n+a[u][t]}(e,r)}catch(n){return 0}}function s(e,r){for(var n=[],t=0;t<r.length;t++)n[t]=v(e,r[t]);for(var o=0;o<r.length;o++)for(var a=o+1;a<r.length;a++)if(n[o]<n[a]){var u=n[o];n[o]=n[a],n[a]=u;var c=r[o];r[o]=r[a],r[a]=c}return r}n(184);console.log("Number of threads on your device: ",navigator.hardwareConcurrency);navigator.hardwareConcurrency;var h={p:1,n:3,b:3,r:5,q:9};function I(e,r){return e.split(r).length-1}function f(e,r){return null===e.get(r.to)}onmessage=function(e){var r,n=performance.now(),a=e.data,u=a.depth,c=a.quiescenceDepth,i=a.posMoves,v=a.gameFEN,N=a.alpha,g=new o.qQ(v),p=Number.NEGATIVE_INFINITY;console.log("posMoves",i);var b,d=(0,t.Z)(i);try{for(d.s();!(b=d.n()).done;){var m=b.value;g.move(m);var k=E(u-1,!1,"black",l(m),m,N);k>p&&(p=k,r=m),g.undo()}}catch(q){d.e(q)}finally{d.f()}var T=performance.now();function E(e,r,n,t,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Number.NEGATIVE_INFINITY,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Number.POSITIVE_INFINITY;if(0===e){if(f(o))return w(n)+t;var i=C(c,r,n,t,o,a,u);return i}var l=g.moves();l=s(g,l);for(var v=r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=0;h<l.length;h++){var I=l[h];g.move(I);var N=E(e-1,!r,n,t,I,a,u);if(r?(N>v&&(v=N),a=Math.max(a,N)):(N<v&&(v=N),u=Math.min(u,N)),g.undo(),u<=a)break}return v}function C(e,r,n,t,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Number.NEGATIVE_INFINITY,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Number.POSITIVE_INFINITY,c=w(n)+t;if(c>=u)return u;if(f(o)||0===e)return w(n)+t;var i=g.moves();i=s(g,i);for(var l=r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=0;v<i.length;v++){var h=i[v];g.move(h);var I=C(e-1,!r,n,t,h,a,u);if(r?(I>l&&(l=I),a=Math.max(a,I)):(I<l&&(l=I),u=Math.min(u,I)),g.undo(),u<=a)break}return l}function w(e){var r=g.fen().split(" ")[0],n=0;return Object.keys(h).forEach((function(e){n+=I(r,e.toUpperCase())*h[e],n-=I(r,e)*h[e]})),"white"===e?n:-n}console.log("Call to minmax took ".concat((T-n)/1e3," seconds")),postMessage([p,r])}}}]);
//# sourceMappingURL=470.c3966489.chunk.js.map